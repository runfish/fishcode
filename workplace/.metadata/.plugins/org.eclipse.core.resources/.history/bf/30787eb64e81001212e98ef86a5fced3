package net.dfrz.supershop01.servicesimpl;

import java.util.ArrayList;
import java.util.List;

import net.dfrz.supershop01.dao.CategoryDao;
import net.dfrz.supershop01.dao.DaoFactory;
import net.dfrz.supershop01.dao.SmallCategoryDao;
import net.dfrz.supershop01.daoimpl.SmallCategoryDaoJDBCImpl;
import net.dfrz.supershop01.domain.SmallCategory;
import net.dfrz.supershop01.services.SmallCategoryService;
import net.dfrz.supershop01.utils.Page;


public class SmallCategoryServiceImpl implements SmallCategoryService {

	SmallCategoryDao smallcategorydao=new SmallCategoryDaoJDBCImpl();
	public void delBigCtg(SmallCategory sctg) {
		// TODO Auto-generated method stub
		smallcategorydao.deleteSmallCategory(sctg.getSmallCtgId());
	}

	public SmallCategory getCtg(Integer ctgId) {
		// TODO Auto-generated method stub
		return smallcategorydao.getOne(ctgId);
	}

	public List<SmallCategory> loadall() {
		// TODO Auto-generated method stub
		return smallcategorydao.ListOraderItem();
	}

	public void modifyCtg(SmallCategory sctg) {
		// TODO Auto-generated method stub
		smallcategorydao.updateSmallCategory(sctg);
	}

	public void addSmallCtg(SmallCategory sctg) {
		// TODO Auto-generated method stub
		smallcategorydao.addSmallCategory(sctg);
	}

	public List<SmallCategory> loadallByBId(Integer id) {
		List<SmallCategory> smallCtgList=new ArrayList<SmallCategory>();
		
		SmallCategoryDao scd=new SmallCategoryDaoJDBCImpl();
		for(SmallCategory smallCtg:scd.ListOraderItem()){
			if(smallCtg.getBigCategory().getCtgId()==id){
				smallCtgList.add(smallCtg);
			}
		}
		
		return smallCtgList;
	}

	public String getAjax(Integer id) {
		String result="<span>商品小类:</span><select name=\"qrysctg\" style=\"width=130px;\"><option value=\"\">==璇烽?==</option>";
		 List<SmallCategory> smallCtgList=this.loadallByBId(id);
		 for(SmallCategory smallCtg:smallCtgList){
			 result+="<option value=\""+smallCtg.getSmallCtgId()+"\">"+smallCtg.getSmallCtgName()+"</option>";
		 }
		return result+="</select>";
	}

	public Page loadPage(Page page) {
		// TODO Auto-generated method stub
		SmallCategoryDao smallCategoryDao=new SmallCategoryDaoJDBCImpl();
		page.setTotalRecNum((long)smallCategoryDao.countSmallCategory());
		page.setPageContent(smallCategoryDao.loadPage(page.getStartIndex(), page.getEndIndex()));
		return page;
	}
	

}
