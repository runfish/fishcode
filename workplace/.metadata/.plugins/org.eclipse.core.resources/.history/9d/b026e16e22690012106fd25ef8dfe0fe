<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
   
    <title></title>
    
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<link rel="stylesheet" type="text/css" href="<c:url value="/css/application.css"></c:url>">
    <link rel="stylesheet" type="text/css" href="<c:url value="/css/form.css"></c:url>">
    <script type="text/javascript" src="<c:url value="/js/prototype.js"/>"></script>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    
    <style>
      *{margin:0;padding:0;}
      html,body{
      	height:100%;
    	margin:0;
    	padding:0;
      }
      body{
    	background:#eae7d7;
    	text-align:center;
    	min-width:626px;
    	min-height:400px;
      }
      #center{
        position:absolute;
	    top:50%;
	    left:50%;
	    margin-top:-198px;
	    margin-left:-313px;
	    width:624px;
	    height:394px;
	    border:1px solid silver;
	    background:white;
	    overflow:auto;
	    text-align:center;
      }
       #title{
        position:absolute;
      	font-size:28px;
      	font-family:方正琥珀繁体;
      	color:white;
      	text-decoration:underline;
      	width:8cm;
      	height:2.5cm;
      	top:10px;
      	float:left;
      }
      #bground{
      	width:622px;
      	height:388px;
      }
      #mainbody{
        position:absolute;
        right:5%;
        top:10%;
        width:300px;
        height:175px;
      }
      #bottom{
        position:absolute;
        top:80%;
        right:0%;
      }
      #submit{
         position:absolute;
         cursor:hand;
         rigth:700px;
         filter:alpha(opacity=0);
         width:90px;
         height:35px;
      }
      .error{
        border:1px solid yellow;
        background:pink;
        color:red;
        width:210px;
        padding:8px;
        margin:5px;
      }  
    </style>
    	<style>
	   
	   .rightCC{
	     font-size:12px;
	     color:green;
	   }
	   
	   .errCC{
	     font-size:12px;
	     color:red;
	   }
	   
	</style>
	
	<script type="text/javascript">
	
	var returnResult= "";
	
    function reloadVerifyCode(){  
  
           var timenow = new Date().getTime();                          
  
           document.getElementById("checkcode").src="<%=request.getContextPath()%>/checkcode?act=generate&d="+timenow;  
  
    }  
    
    function checkCode(){
        //http://localhost:8080/code/genCC?act=checkCode&cc=3h3t
        new Ajax.Request(
            encodeURI("checkcode?act=checkCode&seed="+Math.random()+"&cc="+$('cc').value),
            {
              method:'get',
              onComplete:function(xhr){
                 var result=xhr.responseText;
                 //alert(result);
                 if(result=='ok'){
                   $('checkResult').innerText='验证码正确!';
                   $('checkResult').className='rightCC';
                   returnResult=result;
                 }
                 else
                 {
                   $('checkResult').innerText='验证码错误!';
                   $('checkResult').className='errCC'; 
                    returnResult = "false";

                 }
              }
            }
        );
    }

	
	
	</script>
    
    
 
    
    <script type="text/javascript">
       
      
       function validateEntry(loginFrm){
         
           with(loginFrm){
             
              if(username.value==""){
                 alert("用户帐号必须填写!");
                 userno.select();
                 return false;
              }
              
              if(userpwd.value==""){
                alert("登陆密码必须填写!");
                userpwd.select();
                return false;
              }
<<<<<<< .mine
              
              if(ccode.value==""){
                alert("验证码不能为空");
                ccode.select();
                return false;
              }
               
=======
>>>>>>> .r151
           }
           return true; 
       }
<<<<<<< .mine
        
    function judgeResult(){
   
        return false;
=======
    //刷新验证码图片
    function changeImage(object)
    {
       object.src='<c:url value="/action/checkCode?rand="/>'+Math.random();
    }
   //清楚登入按钮点击后的虚线框
   function clearLine(object)
   {
      object.blur();
   }
  </script>
>>>>>>> .r151
    
<<<<<<< .mine
    }
    </script>
    
=======
>>>>>>> .r151
  </head>
  
  <body>
<<<<<<< .mine
    <div id="wrapper">
	    <div id="f_title">您好，欢迎来到电子商城后台管理：管理员登录</div>
	    <form action="<c:url value="/action/securityMgr?act=login"/>" method="post" onSubmit="return validateEntry(this)&&judgeResult();">
	        <div class="f_row">
	          <span>用户帐号:</span>
	          <input type="text" name="username" value="${param.userno==null?'hhg0012':param.username}"/>
	        </div>
	        <div class="f_row">
	          <span>登录密码:</span>
	          <input type="password" name="userpwd" value="123456"/>        
	        </div>
	         <div class="f_row">
	          <span>输入验证码:</span>
	          <input type="text"  name="ccode" id="cc" size="10"/>
	          <image id="checkcode" src="<c:url value="checkcode?act=generate"/>&randomNum=${randomNum}" />
              <a href="javascript:reloadVerifyCode();">换一张</a>
              <span id="checkResult"></span>
	        </div>
	         <c:if test="${not empty error}">
		        <div class="error">
		            ${error}
		        </div>
	        </c:if>
	        <div class="f_row">
	          <input type="submit"  value=" 登 录 "/>   
	        </div>                        
	        
              
               
	    </form>
=======
  <div id="center">
  <div id="title"><b><i>电子商务后台管理系统</i></b></div>
   <div id="bground">
      <img src="/shop02/pics/loginpic/loginbg.jpg" style="width:100%;height:100%"/>
>>>>>>> .r151
    </div>
	<div id="mainbody">
	   <form action="<c:url value="/action/securityMgr?act=login"/>" method="post" onsubmit="return validateEntry(this);">
		  <div class="f_row">
		      <span style="margin:10px">用户帐号:</span>
		      <input type="text" name="username" value="${param.userno==null?'hhg0012':param.username}"/>
		  </div>
		  <div class="f_row">
		      <span style="margin:10px">登录密码:</span>
		      <input type="password" name="userpwd" value="123456"/>        
		  </div>
		  <div class="f_row">
		      <input name="imgcode" type="text" style="margin-left:10px;"/>
	    	  <img src="<c:url value="/action/checkCode"/>" style="cursor:hand" onclick="changeImage(this);"></img>
		  </div> 
		  <div>
		    <input type="radio" name="isadmin" value="0" checked="checked"/>普通管理员
		    <input type="radio" name="isadmin" value="1"/>超级管理员
		  </div>       
		     <c:if test="${not empty error}">
			      <div class="error">
			            ${error}
			      </div>
		     </c:if>
		  <div class="f_row">
	      <img style="position:absolute;" src="/shop02/pics/loginpic/loginbtn.gif">    
	      <input id="submit" value="" type="submit" onclick="clearLine(this);"/> 
		  </div>                        
     </form>
  </div>
   <div id="bottom">
         <%@ include file="/jsps/common/footer.jsp"%>
    </div>
  </div>
  </body>
</html>
